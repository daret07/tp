{% extends 'core/crear.html'%}
{% block extra_head %}
{{block.super}}
<style type="text/css">
  .box-danger{
    padding: 25px;
  }
</style>
<script type="text/javascript">
  $(document).ready(function(){
    {%if obj%}
      {%if obj.condiciones == True%}
        $('#principal').hide();
        $('#secundario').show();
        $('#condiciones').show()
      {%else%}
        $('#principal').show();
        $('#secundario').hide();
        $('#condiciones').hide()
      {%endif%}
    {%elif not obj%}
        $('#condiciones').hide()
        $('#principal').show();
        $('#secundario').hide();
    {%endif%}
    $('#id_activo').bootstrapSwitch({'onText':'Si','offText':'No','size':'small','handleWidth':35,'offColor':'danger','labelWidth':0});
    $('#id_hermanos').bootstrapSwitch({'onText':'Si','offText':'No','size':'small','handleWidth':35,'offColor':'danger','labelWidth':0});
    $('#id_condiciones').bootstrapSwitch({'onText':'Si','offText':'No','size':'small','handleWidth':35,'offColor':'danger','labelWidth':0});
    $('#minuto').val([{{min_s}}]);
    $('#hora').val([{{hor_s}}]);
    $('#dia').val([{{dia_s}}]);
    $('#mes').val([{{mes_s}}]);
    $('#id_concepto').combobox();
    $('#id_cron').combobox();

    $('input[name="condiciones"]').on('switchChange.bootstrapSwitch', function(event, state) {
        if(state==true){
          $('#condiciones').show()
          $('#principal').hide();
          $('#secundario').show();
        }
        if(state==false){
          $('#condiciones').hide();
          $('#principal').show();
          $('#secundario').hide();
        }
    });

    $('#agregar').on('click',function(){
      addForm('','#recargo','recargo_set');
    })
  });
</script>
{% endblock %}
{% block contenido %}
<form method="post" enctype="multipart/form-data" action="">
  {% csrf_token %}
<div class="row">
  <div class="col-md-6">
    <div class="box box-danger">
      <h3 class='box-title'>Programar Automaticos</h3>
      <div class='box-body'>
        <div class="row">
          <div class="col-md-3">
            <select multiple size="15" name="minuto" style="width:80%;" id='minuto'>
            <optgroup label = "Minuto">
              {%for i in minuto%}
                <option value="{{i}}">{{i}}</option>
              {%endfor%}
            </optgroup>
            </select>
          </div>
          <div class="col-md-3">
            <select multiple size="15" name="hora" style="width:80%;" id='hora'>
              <optgroup label = "Hora">
                {%for i in hora%}
                  <option value="{{i}}">{{i}}</option>
                {%endfor%}
              </optgroup>
            </select>
          </div>
          <div class="col-md-3">
            <select multiple size="15" name="dia" style="width:80%;" id='dia'>
              <optgroup label = "Dia">
              {%for i in dia%}
                <option value="{{i}}">{{i}}</option>
              {%endfor%}
              </optgroup>
            </select>
          </div>
          <div class="col-md-3">
            <select multiple size="15" name="mes" style="width:120%;" id='mes'>
                <optgroup label = "mes">
                {%for i in mes%}
                <option value="{{i.0}}">{{i.1}}</option>
                {%endfor%}
              </optgroup>
            </select>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="col-md-6">
    <div class="box box-danger">
      <h3 class='box-title'>Conceptos</h3>
      <div class='box-body'>
        <div class="row">
          <div class="col-md-3">Activo</div>
          <div class="col-md-3">{{form.activo}}</div>
        </div>
        <div class="row">
          <div class="col-md-3">Que Tipo de Concepto:</div>
          <div class="col-md-9" id='principal'>{{form.concepto}}</div>
          <div class="col-md-9" id='secundario' hidden><input type="text" name="" class="form-control" readonly="readonly"></div>
        </div>
        <div class="row">
          <div class="col-md-3">Aplicara Condiciones<br/>(Se Usa para recargos) </div>
          <div class="col-md-9">{{form.condiciones}}</div>
        </div>
      </div>
    </div>
  </div>
</div>
<div class="row" >
  <div class="col-md-12">
      <div class="box box-danger">
        <h3 class='box-title'>Recargos</h3>
        <div class='box-body' id="condiciones" {%if form.condiciones%} {% else %}hidden{% endif %}>
        <div class="row">
          <div class="col-md-3">Aplicara Recargos <i class="btn btn-primary fa fa-plus" id='agregar' name=""></i></div>
          <div class="col-md-9">{{form.recargos}}</div>
        </div>
          <div class="row">
            <div id="recargo">
              {{formset.management_form}}
                <table class='table table-condensed'>
                  <thead>
                    <tr>
                      <th>Activo</th>
                      <th>Si Debe</th>
                      <th>Concepto que se debe</th>
                      <th>Se aplicara</th>
                      <th>Eliminar</th>
                    </tr>
                  </thead>
                <tbody>
                  {%for i in formset%}
                  {{i.id}}
                      <tr class="dynamic-form" >
                        <td>{{i.activo}}</td>
                        <td>{{i.cantidad_debe}}</td>
                        <td>{{i.concepto}}</td>
                        <td>{{i.aplica}}</td>
                        <td>{{i.DELETE}}</td>
                      </tr>
                  {%endfor%}
                </tbody>
              </table>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</form>
{% endblock %}